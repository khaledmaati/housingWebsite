name: Update Git Info

on:
  push:

jobs:
  update-git-info:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Generate Git Info
      run: |
        echo '{ "commitHash": "'$(git rev-parse HEAD)'", "date": "'$(date)'"}' > src\assets\git-info.json

    - name: Commit and Push
      run: |
        
        git add src\assets\git-info.json
        git commit -m "Update Git Info"
        git -c http.extraHeader="AUTHORIZATION: bearer ${{ secrets.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 }}" push
